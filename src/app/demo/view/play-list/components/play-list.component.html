<div class="ui-g-12 ui-g-nopad" style="margin-bottom: 28vh;">
  <div class="ui-g-12 card" style="padding: 25px;">
    <div class="ui-g-12 ui-g-nopad filterArea margin-bottom-50">
      <div class="left">
        <p-dropdown [options]="playListList" [(ngModel)]="selectedPlayList" [style]="{'width': '200px'}" (onChange)="loadPlayList(selectedPlayList);"></p-dropdown>
        <button type="button" class="margin-left-10 setting_btn" (click)="settingDialog=true; loadSettingPlayList();"><i class="fas fa-cog"></i></button>
      </div>
    </div>

    <div class="dataArea margin-bottom-50">
      <div class="ui-g-nopad ui-g-12 margin-bottom-30">
        <div class="left">
          <button pButton type="button" label="선택 이동" class="margin-right-10" (click)="hasSelectItem('move');"></button>
          <button pButton type="button" label="선택 삭제" class="margin-right-10" (click)="hasSelectItem('delete');"></button>
          총 <span class="c_red">{{ playListRowData.length }}</span>개
        </div>
        <div class="right">
          <input type="text" pInputText placeholder="검색">
        </div>
      </div>
      <div class="ui-g-nopad ui-g-12 margin-bottom-30">
        <p-table #dt class="selectTable" [columns]="playListCols" [value]="playListRowData" [paginator]="true" [rows]="20" [rowsPerPageOptions]="[20,50,100]" [(selection)]="tempSelectItems">
          <ng-template pTemplate="colgroup" let-columns>
            <colgroup>
              <col style="width: 3em">
              <col *ngFor="let col of columns" [style.width]="col.width">
            </colgroup>
          </ng-template>
          <ng-template pTemplate="header" let-columns>
            <tr>
              <th>
                <p-tableHeaderCheckbox></p-tableHeaderCheckbox>
              </th>
              <th *ngFor="let col of columns; let i = index" [pSortableColumn]="col.field" pResizableColumn>
                {{ col.header }}
                <p-sortIcon *ngIf="i !== 0" [field]="col.field" ariaLabel="Activate to sort" ariaLabelDesc="Activate to sort in descending order" ariaLabelAsc="Activate to sort in ascending order"></p-sortIcon>
              </th>
            </tr>
          </ng-template>
          <ng-template pTemplate="body" let-rowData let-columns="columns" let-playList>
            <tr [pSelectableRow]="playList">
              <td>
                <p-tableCheckbox [value]="playList"></p-tableCheckbox>
              </td>
              <td>{{ playList['ft_seq'] }}</td>
              <td><img [src]="playList['ft_thumb_path']" alt="썸네일" style="width: 100%; height: auto;"></td>
              <td>{{ playList['pl_nm'] }}</td>
              <td>{{ playList['title'] }}</td>
              <td>{{ playList['ft_nm'] }}</td>
              <td>{{ playList['filetype'] }}</td>
              <td>{{ playList['ft_size'] }} MB</td>
              <td>{{ playList['ft_reg_dtm'] }}</td>
              <td>{{ playList['ft_status'] }}</td>
            </tr>
          </ng-template>
          <ng-template pTemplate="emptymessage" let-columns>
            <tr>
              <td [attr.colspan]="columns.length + 1" class="emptyMessage">표시할 데이터가 없습니다.</td>
            </tr>
          </ng-template>
        </p-table>
      </div>
      <div class="ui-g-12 ui-g-nopad">
        <button pButton type="button" label="선택파일 위로 이동" class="margin-right-10" ></button>
        <span>※ 재생목록에 등록된 파일 순으로 재생됩니다.</span>
      </div>
    </div>
  </div>
</div>

<p-dialog [(visible)]="settingDialog" [width]="900" [modal]="true" [showHeader]="false">
  <div class="txt-right margin-top-15">
    <button type="button" class="close_btn" (click)="closePopup()" label="close button"><i class="fas fa-times"></i></button>
  </div>
  <div class="margin-top-40 margin-bottom-50">
    <h2 class="txt-center margin-bottom-40">재생목록 관리</h2>
    <div>
      <button pButton type="button" class="margin-right-5 margin-bottom-20" label="새로 추가" (click)="addPlayList();"></button>
      <button pButton type="button" class="margin-right-5" label="선택 삭제" (click)="deletePlayList();"></button>
      <button pButton type="button" class="margin-right-5" label="수정" (click)="modifyPlayList();"></button>
      <button pButton type="button" label="상태변경" (click)="switchStatus();"></button>

      <p-table class="selectTable" [columns]="playListSettingCols" [value]="playListSettingRowData" [(selection)]="selectSettingItems">
        <ng-template pTemplate="colgroup" let-columns>
          <colgroup>
            <col *ngFor="let col of columns" [style.width]="col.width">
          </colgroup>
        </ng-template>
        <ng-template pTemplate="header" let-columns>
          <tr>
            <th style="width: 3em">
              <p-tableHeaderCheckbox></p-tableHeaderCheckbox>
            </th>
            <th *ngFor="let col of columns; let i = index" [pSortableColumn]="col.field" pResizableColumn>
              {{ col.header }}
              <p-sortIcon *ngIf="i !== 0" [field]="col.field" ariaLabel="Activate to sort" ariaLabelDesc="Activate to sort in descending order" ariaLabelAsc="Activate to sort in ascending order"></p-sortIcon>
            </th>
          </tr>
        </ng-template>
        <ng-template pTemplate="body" let-rowData let-columns="columns" let-playListSetting>
          <tr [pSelectableRow]="playListSetting">
            <td>
              <p-tableCheckbox [value]="playListSetting"></p-tableCheckbox>
            </td>
            <td *ngIf="playListSetting['mode'] === 'add' || playListSetting['mode'] === 'modify'">
              <input type="text" [(ngModel)]="playListSetting['pl_nm']" placeholder="재생목록명을 입력해주세요" style="width: 100%; padding: 5px 10px; border: 1px solid #ccc;">
            </td>
            <td *ngIf="playListSetting['mode'] === 'normal'">
              {{ playListSetting['pl_nm'] }}
            </td>
            <td>{{ playListSetting['content_cnt'] }} <span *ngIf="playListSetting['mode'] === 'normal'">개</span></td>
            <td>{{ playListSetting['content_size'] }} <span *ngIf="playListSetting['mode'] === 'normal'">MB</span></td>
            <td *ngIf="playListSetting['mode'] !== 'normal'">
              <p-dropdown [options]="statusOption" [(ngModel)]="playListSetting['service_status']"></p-dropdown>
            </td>
            <td *ngIf="playListSetting['mode'] === 'normal'">{{ playListSetting['service_status'] }}</td>
            <td>{{ playListSetting['pl_reg_dtm'] }}</td>
            <td>{{ playListSetting['updated_at'] }}</td>
          </tr>
        </ng-template>
      </p-table>
      <div class="ui-g-12 ui-g-nopad margin-top-20">
        <button pButton type="button" label="선택목록 위로 이동"></button>
      </div>
    </div>
  </div>
  <div class="ui-g-12 ui-g-nopad txt-center margin-top-40 margin-bottom-40">
    <button pButton type="reset" class="btn margin-right-5 ui-button-secondary" (click)="settingDialog=false;" label="취소"></button>
    <button pButton type="submit" class="btn" (click)="updatePlayList();" label="저장"></button>
  </div>
</p-dialog>

<p-dialog [(visible)]="moveDialog" [width]="400" [modal]="true" [showHeader]="false">
  <div class="txt-right margin-top-15">
    <button type="button" class="close_btn" (click)="closePopup()" label="close button"><i class="fas fa-times"></i></button>
  </div>
  <div class="txt-center margin-top-30 margin-bottom-30">
    <h2 class="margin-bottom-40">선택 재생목록으로 이동</h2>
    <span class="margin-right-10">재생목록</span>
    <p-dropdown [options]="originPlayListList" [(ngModel)]="selectedMovePlayList"></p-dropdown>
  </div>
  <div class="ui-g-12 ui-g-nopad txt-center margin-top-40 margin-bottom-30">
    <button pButton type="reset" class="btn margin-right-5 ui-button-secondary" (click)="moveDialog=false;" label="취소"></button>
    <button pButton type="submit" class="btn" (click)="movePlayList();" label="확인"></button>
  </div>
</p-dialog>

<p-dialog [(visible)]="notSelectDialog" [width]="400" [modal]="true" [showHeader]="false">
  <div class="txt-right margin-top-15">
    <button type="button" class="close_btn" (click)="closePopup()" label="close button"><i class="fas fa-times"></i></button>
  </div>
  <div class="txt-center margin-top-30 margin-bottom-30">
    항목을 선택해주세요.
  </div>
  <div class="ui-g-12 ui-g-nopad txt-center margin-top-40 margin-bottom-30">
    <button pButton type="submit" (click)="notSelectDialog=false;" label="확인"></button>
  </div>
</p-dialog>